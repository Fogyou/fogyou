<script>
const DATA_URL = "https://script.google.com/macros/s/AKfycbwSoho1_PYwCEJMqzwKhBj6BcxDhYhWtvkIqJ5EMpZeL-0rqJcHrPFz8lmblYzwhFGn/exec";

fetch(DATA_URL)
  .then(res => res.json())
  .then(items => {
    const catalog = document.getElementById("catalog");

    // Группируем по категориям
    const grouped = {};

    items.forEach(item => {
      const category = item.category || "Другое";
      if (!grouped[category]) {
        grouped[category] = [];
      }
      grouped[category].push(item);
    });

    // Выводим категории и товары
    Object.keys(grouped).forEach(category => {
      catalog.insertAdjacentHTML("beforeend", `
        <div class="category-block">
          <div class="category-title">${category}</div>
        </div>
      `);

      grouped[category].forEach(item => {
        catalog.insertAdjacentHTML("beforeend", `
          <div class="card">
            <img src="${item.image}"
                 onerror="this.src='https://via.placeholder.com/400x250?text=No+Image'">
            <h3>${item.name}</h3>
            <p>${item.description}</p>
            <div class="price">${item.price} ${item.currency}</div>
          </div>
        `);
      });
    });
  });
</script>
